<div class="container main-block">
  <div class="container col-8">
    <h3>Order</h3>

    <form [formGroup]="form" (ngSubmit)="onSubmit(form.value)">
      <div class="input-group mb-2">
        <div class="input-group-prepend" for="fullName">
          <span class="input-group-text">ПІБ</span>
        </div>
        <input
          type="text"
          class="form-control"
          placeholder="Прізвище Ім'я По батькові"
          formControlName="fullName"
        />
      </div>

      <div
        [hidden]="
          form.controls.fullName.valid || !form.controls.fullName.touched
        "
        class="alert alert-danger"
      >
        ПІБ не може бути порожнім
      </div>

      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text">Телефон</span>
        </div>

        <input
          type="text"
          class="form-control"
          placeholder="(0__) ___-__-__"
          formControlName="phone"
        />
      </div>

      <div
        [hidden]="form.controls.phone.valid || !form.controls.phone.touched"
        class="alert alert-danger"
      >
        Номер повинен бути у форматі (XXX) XXX-XX-XX
      </div>

      <div class="mb-2">
        <app-dropdown
          input-name="Місто"
          [getValue]="getValue"
          [getService]="getCities"
          (selected)="onCitySelected($event)"
          formControlName="city"
        >
        </app-dropdown>
      </div>

      <div
        [hidden]="form.controls.city.valid || !form.controls.city.touched"
        class="alert alert-danger"
      >
        Почніть вводити назву міста та оберіть зі списку
      </div>

      <div class="mb-2">
        <app-select
          input-name="Відділення"
          [getValue]="getValue"
          [getService]="getOutlets"
          [forRoot]="getId(selectedCity)"
          formControlName="outlet"
        >
        </app-select>
      </div>

      <div
        [hidden]="form.controls.outlet.valid || !form.controls.outlet.touched"
        class="alert alert-danger"
      >
        Оберіть відділення
      </div>

      <div
        class="mat-app-background basic-container"
        *ngIf="!orderResult.valid"
      >
        <button type="submit" [disabled]="!form.valid" class="btn btn-primary">
          Підтвердити
        </button>
      </div>
      <div>
        <h3 [hidden]="!orderResult.ready" class="alert alert-success">
          {{ orderResult.message }}
        </h3>
      </div>

      <div>
        <h3 [hidden]="!formHasErrors" class="alert alert-danger">
          Замовлення містить помилки
        </h3>
      </div>
    </form>

    <button
      type="button"
      class="btn btn-lg btn-danger"
      data-placement="top"
      data-toggle="popover"
      data-trigger="focus"
      data-content="p1"
      >
      Click to toggle popover
    </button>
  </div>

  <ng-template #p1>
    <strong>Popover</strong>
  </ng-template>
</div>
